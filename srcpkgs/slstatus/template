# Template file for 'slstatus'
pkgname=slstatus
version=2.0
revision=master
build_style=gnu-makefile
short_desc="Suckless status monitor for dwm"
maintainer="Dom H. <dom@hxy.io>"
license="ISC"
homepage="https://git.nulltime.net/slstatus"
distfiles="https://git.suckless.org/slstatus/snapshot/slstatus-master.tar.gz"
wrksrc="slstatus-master"
makedepends="alsa-lib-devel libX11-devel"
checksum=fd4ded137c68c3e92e4c8cb21ef23cba67ed1e24af26351a7864e76df0865385

build_options="copyleftie"
desc_option_copyleftie="Apply copyleftie's patches and config.h"

pre_build() {
	if [ "$build_option_copyleftie" ] ; then
		cp ${FILESDIR}/config.h.copyleftie config.h
	else
		cp ${FILESDIR}/config.h config.h
	fi
	
	sed -i 's|^CFLAGS *=|override CFLAGS +=|g' config.mk
	sed -i 's|^LDFLAGS *=|override LDFLAGS +=|g' config.mk
}

post_install() {
	vlicense LICENSE
}
