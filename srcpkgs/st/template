# Template file for 'st'
pkgname=st
version=0.7
revision=master
build_style=gnu-makefile
make_use_env=compliant
hostmakedepends="pkg-config"
makedepends="fontconfig-devel libX11-devel libXft-devel"
depends="ncurses"
short_desc="Simple terminal implementation for X"
maintainer='Juan RP <xtraeme@voidlinux.eu>'
license="MIT"
homepage="https://st.suckless.org"
distfiles="https://git.suckless.org/st/snapshot/st-master.tar.gz"
wrksrc="st-master"
checksum=57d6af89a79b5d14c27872432a8d167ba33f461b3e67158bb346d0b8fd1bca82

build_options="copyleftie"
desc_option_copyleftie="Apply copyleftie's patches and config.h"

pre_build() {
	# We will use tic after install. See INSTALL.
	# this does not work for some reason!!
	sed -i "s/tic -sx st.info//g" Makefile
	# cp ${FILESDIR}/Makefile Makefile
	
	if [ "$build_option_copyleftie" ] ; then
		cp ${FILESDIR}/config.h.copyleftie config.h
		patch -Nl < ${FILESDIR}/clipboard.patch
		# patch -NRl < dracula.patch
	else
		cp ${FILESDIR}/config.h config.h
	fi
}

post_install() {
	vinstall st.info 644 usr/share/terminfo/s st.terminfo
	vdoc README
	vlicense LICENSE
}
